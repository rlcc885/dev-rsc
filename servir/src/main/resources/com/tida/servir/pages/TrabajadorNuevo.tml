<html t:type="layout" title="Sistema SERVIR"
      xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd"    
      xmlns:p="tapestry:parameter">

    <div class="organismo_titulo">
        Entidad /U. Ejecutora: ${oi.denominacion}
    </div>
    <div t:type="zone" t:id="mensajesZone" >
        <t:form t:id="formulariomensajes"  zone="mensajesZone"> 
            <t:envelope t:id="envelope"/>
            <t:errors/>
        </t:form> 
    </div>
    <t:if test="${vformulario}">
        <div class="box-background-title">
            <span class="box-title">Alta de Trabajador</span>
        </div>
        <div class="box">
            <t:zone t:id="trabajadorNuevoZone">
                <t:form t:id="formulariotrabajadornuevo" zone="trabajadorNuevoZone">
                    <t:errors/>
                    <t:if test="mostrar">
                        <fieldset>
                            <legend> Datos Personales</legend>
                            <div class="f-wrap">
                                <div class="f-left">
                                    <t:label for="nuevo_tipoDocumento"/> 
                                    <select t:type="Select" t:id="nuevo_tipoDocumento" t:value="nuevo.documentoidentidad" onChange="this.form.fire(Tapestry.FORM_PROCESS_SUBMIT_EVENT)"
                                            model="tiposDoc" t:blankOption="ALWAYS" t:validate="required" />
                                </div>
                                <div class="f-left">
                                    <t:label for="nuevo_nroDocumento"/>
                                    <input t:type="TextField" t:id="nuevo_nroDocumento" t:value="nuevo.nroDocumento" t:mixins="zoneUpdater" t:clientEvent="keyup" t:event="DNIChanged"  t:zone="trabajadorNuevoZone"
                                           size="12" t:validate="required, regexp"/>
                                </div>                         
                            </div>
                            <div class="f-wrap">
                                <div class="f-left">
                                    <t:label for="nuevo_nombres"/>
                                    <input t:type="TextField" t:id="nuevo_nombres" t:value="nuevo.nombres" size="30" t:validate="required" t:mixins="zoneUpdater" t:clientEvent="keyup" t:event="nombreChanged"  t:zone="trabajadorNuevoZone"/>
                                </div>
                                <div class="f-left">
                                    <t:label for="nuevo_apellidoPaterno" />
                                    <input t:type="TextField" t:id="nuevo_apellidoPaterno" t:value="nuevo.apellidoPaterno" size="30" t:validate="required" t:mixins="zoneUpdater" t:clientEvent="keyup" t:event="apePatChanged"  t:zone="trabajadorNuevoZone"/>
                                </div>
                                <div class="f-left">
                                    <t:label for="nuevo_apellidoMaterno" />
                                    <input t:type="TextField" t:id="nuevo_apellidoMaterno" t:value="nuevo.apellidoMaterno" size="30" t:validate="required" t:mixins="zoneUpdater" t:clientEvent="keyup" t:event="apeMatChanged"  t:zone="trabajadorNuevoZone"/>
                                </div>
                            </div>                    
                        </fieldset>
                    </t:if>
                    <!--                                    </t:form>
                    </t:zone>-->
                    <!--            <t:form t:id="formulariotipovinculo">-->
                    <fieldset>
                        <legend> Asignación de Cargo</legend>
                        <div class = "f-wrap">
                            <t:zone t:id="unidadOrganicaZone" id="unidadOrganicaZone">
                                <!--                            <t:form t:id="formulariounidadorganica" zone="nuevaUnidadOrganicaZone">-->
                                <div class ="f-left">
                                    <t:label for="unidadorganica" />
                                    <select t:type="Select"
                                            t:id="unidadorganica"
                                            t:value="unidadorganica"   
                                            model="beanUOrganicas"
                                            t:blankOption="ALWAYS" 
                                            t:zone="cargosZone"/>
                                    <!--                                <input t:type="Submit" t:id="nuevaUO" value="..." class="button" />-->
                                    <a onClick="javascript: mostrar();" class="button">...</a>
                                    <!--                                <t:actionlink t:id="nuevaUnidadOrganica" 
                                                  t:zone="nuevaUnidadCargoZone" 
                                                  onClick="javascript: mostrar();"
                                                  href="#"
                                                  t:class="button">...
                                    </t:actionlink>-->
                                </div>
                                <!--                            </t:form>-->
                            </t:zone>

                            <t:zone t:id="cargosZone" id="cargosZone">
                                <!--                            <t:form t:id="formulariocargo" zone="nuevoCargosZone">-->
                                <div class ="f-right">
                                    <t:label for="cargo"/>
                                    <input t:type="Select" t:id="cargo" t:value="cargo" 
                                           model="beanCargo" onChange="this.form.fire(Tapestry.FORM_PROCESS_SUBMIT_EVENT)"  
                                           t:blankOption="ALWAYS"/>
                                    <!--                                <input t:type="Submit" t:id="nuevaCargo" value="..." class="button" />-->
                                    <a onClick="javascript: mostrarCargo();" class="button">...</a>
                                </div>
                                <!--                            </t:form>-->
                            </t:zone>
                        
                        </div>
                
                        <div class = "f-wrap">
                            <!--                    <t:zone t:id="tipoVinculoZone">-->
                            <div class ="f-left">
                                <t:label for="tipovinculo" />
                                <input t:type="Select" t:id="tipovinculo" t:value="tipovinculo"   
                                       model="beanTipoVinculo"
                                       t:validate="required" t:blankOption="ALWAYS"/>
                            </div>
                            <div class="f-left">
                                <t:label for ="puestoconfianza">Puesto Confianza: </t:label>
                                <input t:type="Checkbox" t:id="puestoconfianza"
                                       t:value="puestoconfianza" />
                            </div>                           
                            <div class="f-left">	
                                <t:label for="fecha_ingreso"/>
                                <input t:type="TextField" t:id="fecha_ingreso" t:value="fechaingreso" t:validate="required" class="fecha_ingreso pictureInputDate" />
                                <!--                                <img src="layout/images/cal3.gif" border="0" width="18" height="16" onclick="popUpCalendar(this, formulariotipovinculo.fecha_ingreso, 'dd/mm/yyyy');" style="cursor:hand;"></img>-->
                            </div>
                        </div>
                    </fieldset>
                    <div class="actions">
                        <div class="f-left">
                            (*) Campos Obligatorios
                        </div>
                        <!--                            <div t:type="zone" t:id="botonesZone" >-->
                        <input t:type="Submit" t:id="guardar" value="Guardar" class="button f-right" t:mixins="confirm" t:message="Desea ejecutar esta acción?"/>
<!--                        <input t:type="Submit" t:id="reset" value="Limpiar Formulario" class="button f-right" t:mixins="confirm" t:message="Desea ejecutar esta acción?"/>-->
                        <t:eventLink t:event="reset" href="#" class="button f-right" t:zone="trabajadorNuevoZone">
                            <span t:type="any" t:mixins="Confirm" t:message="Desea ejecutar esta acción?">
                                Limpiar Formularios
                            </span> 
                        </t:eventLink>
<!--                        <input t:type="Submit" t:id="cancel" value="Cancelar" class="button f-right" t:mixins="confirm"  t:message="Desea ejecutar esta acción?"/>-->
                        <a t:type="pagelink" page="busqueda" class="button f-right">Cancelar</a>
                        <!--                            </div> -->
                    </div>
                    <script>
                            jQuery(document).ready(function() {
                            jQuery('.fecha_ingreso').datepick({dateFormat: 'dd/mm/yyyy'});
                            });
                        </script>
                    <!--            </t:form>-->

                </t:form>
            </t:zone>
        </div>
                
        <!--                    </t:form>
        </t:zone>-->
        <!--        </div> -->
    
        <!--
        </div>-->
        <t:zone t:id="listaentidadZone">
            <t:if test="bTrabajadorRegistrado">
                <div class="box">
                    <div id = "tabla_oi">
                        <t:grid source="listadoEntidades"
                                rowsPerPage="10"
                                pagerPosition="bottom"
                                row="listaentidad"
                                include="id,nombretrabajador,entidad,unidadorganica,cargo,estadocargo"
                                inPlace="true">
                            <t:parameter name="empty">
                                <div class="no-info">No hay entidades generadas</div>
                            </t:parameter>
                        </t:grid>
                    </div>  
                </div>
            </t:if>
        </t:zone>
        <!--        <div class="f-wrap">  
            <div t:type="zone" t:id="botonesZone" >
                <t:form t:id="formulariobotones"  t:zone="listaentidadZone">
                    <div class="f-right">
                        <input t:type="Submit" t:id="cancel" value="Cancelar" class="button" t:mixins="confirm"  t:message="Desea ejecutar esta acción?"/> 
                    </div>
                    <div class="f-right">
                        <input t:type="Submit" t:id="reset" value="Limpiar Formulario" class="button" t:mixins="confirm" t:message="Desea ejecutar esta acción?"/>  
                    </div>
                </t:form>
            </div>
        </div>  -->
    </t:if>
    <t:if test="${vformulario}" negate="true" >
        <div class="no-info">No tiene permisos suficientes</div>
    </t:if>
    
    <div id="shade"></div>
    <div id="modalNuevaUnidadOrganica">
        <t:zone t:id="nuevaUnidadZone">
            <t:form t:id="formularionuevaunidadorganica" t:zone="nuevaUnidadZone">
                <t:errors/>
                <div class="f-wrap">
                    <t:label for="unidadorganica2"/>
                    <input t:type="TextField" t:id="unidadorganica2" t:value="nuevaUOrganica" size="65"/>
                </div>
                <div class ="f-wrap">
                    <input t:type="Submit" t:id="agregarUO" value="Agregar" class="button f-right" onClick="javascript: ocultar();"/>
                    <a onClick="javascript: ocultar();" class="button f-right">Cancelar</a>
                </div>
            </t:form>
        </t:zone>
    </div>
    <div id="shade2"></div>
    <div id="modalNuevoCargo">
        <t:zone t:id="nuevoCargoZone">
            <t:form t:id="formularionuevocargo" t:zone="nuevoCargoZone">
                <div class ="f-wrap">
                    <t:label for="cargo2"/>
                    <input t:type="TextField" t:id="cargo2" t:value="nuevoCargo" size="65"/>
                </div>
                <div class ="f-wrap">
                    <input t:type="Submit" t:id="agregarCargo" value="Agregar" class="button f-right" onClick="javascript: ocultarCargo();"/>
                    <a onClick="javascript: ocultarCargo();" class="button f-right">Cancelar</a>
                </div>
            </t:form>
        </t:zone>
    </div>
    <script type="text/javascript">
        var modal= document.getElementById('modalNuevaUnidadOrganica');
        var modalCargo= document.getElementById('modalNuevoCargo');
        var shade= document.getElementById('shade');
        function mostrar() {
        modal.style.display=shade.style.display= 'block';
        };
        function ocultar() {
        modal.style.display=shade.style.display= 'none';
        };
        function mostrarCargo() {
        modalCargo.style.display=shade2.style.display= 'block';
        };
        function ocultarCargo() {
        modalCargo.style.display=shade2.style.display= 'none';
        };
        jQuery(function() {
        jQuery('#fecha_ingreso').datepick({dateFormat: 'dd/mm/yyyy'});
        });
    </script>
    
</html>