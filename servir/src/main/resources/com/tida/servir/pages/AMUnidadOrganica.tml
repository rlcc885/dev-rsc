<html t:type="layout" title="Servir Unidades Orgánicas"
      xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd"
      xmlns:p="tapestry:parameter">


    <div class="organismo_titulo">
        Entidad /U. Ejecutora: ${entidadUE.denominacion}
    </div>

    <h2> Unidades Orgánicas </h2>


    <div class="box-background-title">
        <span class="box-title">Buscar UO</span>
    </div>
    <div id="box-unidades" class="box" >
        <!-- t:validate="required,minlength=1" -->


        <!--<div id="cargosSelects">   -->
            <!--<t:zone t:id="nivelOrga">
                <form t:type="form" t:id="formNivelUOUnidad" t:zone="nivelUOZone">                        
                                                       
                </form>
            </t:zone>-->
            <t:zone t:id="nivelUOZone">
                <form t:type="form" t:id="xxx" t:zone="listaUOZone">
                    <!--<div t:type="zone" t:id="selectUOZone" class="selectform t-zone f-left" >-->
                        <!--<t:if test = "hayNivel">-->
                   <div class="f-wrap">
                        <div class="f-left">
                            <label>Nivel Organizacional</label>
                            <input t:type="Select" t:id="bunidadorganica_nivel"                                
                                t:value="bnivelUO" model="nivel" t:zone="nivelUOZone"/>
                        </div> 
                        <div class="f-left">
                            <label>Unidad Orgánica Antecesora</label>
                            <select t:type="select" t:id="bunidadOrganica_uoa"
                                    model="bbeansUO" encoder="bbeansUO" value="buoAntece"
                                    onChange="this.form.fire()" t:zone="listaUOZone"/>
                        </div>
                        <div class="f-left">
                            <label>Categoría</label>                                
                            <input t:type="Select" t:id="bcategoria" t:value="valcategoria" model="tipoActividad" />
                        </div>
                   </div>
                        <!--</t:if>-->
                    <!--</div> -->
                </form>
            </t:zone>

        <!--</div>-->                    
        <div t:type="zone"  id="form_unidad_organica" class="abmform">
            <t:zone t:id="filtrosZone"> 
                <form t:type="form" t:id="formulariofiltrounidad" zone="listaUOZone">
                    <div class="f-wrap">                        
                        <div class="f-left">
                            <label>Denominación</label>
                            <input t:type="TextField" t:id="bdenouni" t:value="bdenouni" size="33"/>                                
                        </div>
                        <div class="f-left">
                            <label>Sigla</label>
                            <input t:type="TextField" t:id="bsigla" t:value="bsigla" size="33"/>
                        </div>
                        <!--First name: <input t:type="TextField" t:id="firstName" t:value="bescon"/>-->
                        
                        <!--<input t:type="TextField" t:id="escon" t:value="bescon" size="30"/>-->
                        
                    </div>
                    <div class="actions f-right">
                        <!--<t:actionlink t:id="muestra" zone="listaUOZone">Mostrar Todo</t:actionlink>-->
                        <!--<a t:type="eventLink" t:event="toMostrar" t:context="literal:1" t:zone="listaUOZone" href="#"> Mostrar </a>-->
                        
                        
                        <input id="buscarsubmit" type="submit" value="Buscar" class="button" />
                        <input t:type="Submit" t:id="limpia" value="Limpiar formulario" t:mixins="confirm" page="AMUnidadOrganica" class="button"/> 
                        <input t:type="Submit" t:id="muestra" value="Mostrar Todo" class="button"/> 
                    </div>                         

                </form> 
            </t:zone>

        </div>
         <br/> 
         <br/>
         <br/>
    </div>

    
    <div t:type="zone" t:id="listaUOZone" class="selectform" >
        <!-- <t:if test = "hayOrgano"> -->        
        <t:if test="mostrar">
            <div class="box-background-title">
                <span class="box-title">Listado de UO</span>
            </div>
            <div id="box-unidades" class="box" >
            <t:form t:id="formularioxx">      
                <t:grid source="unidadesorganicas" rowsPerPage="10" t:add="Acciones" pagerPosition="bottom"
                        row="uo" exclude="estado,nivel,sigla,cue,desczona">
                    <t:parameter name="empty">
                        <div class="no-info">No se han encontrado coincidencias</div>
                    </t:parameter>
                    <p:accionesCell>    
                      <t:if test="${veditar}">
                        <!--<a t:type="pagelink" t:page="AMUnidadOrganica" t:context="uo.id" href="#">Editar</a>-->
                        <t:actionlink t:id="editar" zone="listaUOZone" context="uo">Editar</t:actionlink>
                      </t:if>
                      <t:if test="${veditar}" negate="true">
                            <t:actionlink t:id="detalle" zone="listaUOZone" context="uo">Ver Detalle</t:actionlink>
                            
                      </t:if>
                      <t:if test="${veliminar}">  
                        <t:if test="esBorrable">
                            | <a t:type="eventLink" t:event="borrarDato" t:context="uo"
                                    t:zone="listaUOZone" href="#" ><span t:type="any" t:mixins="Confirm" t:message="¿Desea eliminar el registro?">
                                Eliminar
                                </span> </a>                      
                        </t:if>  
                      </t:if> 
                    </p:accionesCell>
                </t:grid>
                <t:if test="errorBorrar">
                    <div class="error" id = "errorBorrar">
                        ${errorBorrar}
                    </div>
                </t:if>
                <!-- </t:if> -->
                
            </t:form>
          </div>
        </t:if>

    </div> <!-- listaUOZone -->
    
     <div t:type="zone" t:id="mensajeZone" class="abmform" t:update="show">    
            <form t:type="form" t:id="formmensaje" t:zone="mensajeZone">
             <t:envelope t:id="envelope"/>
                <t:errors/> 
            </form>
     </div>   

    <div class="box-background-title">
        <span class="box-title">Crear/Editar Unidades Orgánicas</span>
    </div>
    <div id="box-unidades" class="box" >
        <!--<div id="form_unidad_organica" class="abmform">-->
            <!--<t:zone t:id="nivelZone">
              <t:if test="${vformulario}">
                
                
                
                <form t:type="form" t:id="formNivelUO" t:zone="nivelZone">                    
                   <t:envelope t:id="envelope"/>
                   
                   
                    <div class="f-wrap">
                        
                    </div>
                    
                   
                </form>
                </fieldset>
              </t:if>
            </t:zone>-->
            <t:zone t:id="unidadesOrganicasZone">
                <t:if test="${vformulario}">    
                    <t:form t:id="formularioaltaunidadorganica" t:zone="unidadesOrganicasZone">
                      <fieldset>
                       <legend> Datos </legend>
                                            
                       <div class="f-wrap">
                        <div class="f-left">
                            <label>* Nivel Organizacional</label>
                            <input t:type="Select" t:id="unidadorganica_nivel"
                                    t:zone="unidadesOrganicasZone" 
                                   t:value="nivelUO" model="nivel" t:validate="required" t:disabled="${vdetalle}"/>
                        </div>
                        <t:if test="nivelUno" negate= "true">
                           <div class="f-left">
                                <label>* Unidad Orgánica Antecesora</label>
                                <input t:type="Select" t:id="unidadOrganica_uoa"
                                       onChange="this.form.fire()" 
                                       t:value="uoAntecesora" model="beansUO"
                                       t:zone="ubigeoDomZone" t:disabled="${vdetalle}"/>
                            </div>
                        </t:if>
                        <div class="f-left">
                                <label>Categoría</label>
                                <input t:type="Select" t:id="unidadOrganica_categoriauo" model="tipoActividad"
                                       t:value="unidadorganica.categoriauo" t:disabled="${vdetalle}"/>
                        </div>
                      </div>                      
                       <br/>
                        <div class="f-wrap">
                            <div class="f-left">
                                <label>Código</label>
                                <input t:type="TextField" t:id="unidadorganica_cod_und_organica"
                                       t:value="unidadorganica.cod_und_organica" size="20" t:validate="maxlength=50" t:disabled="${vdetalle}"/>
                            </div>
                            <div class="f-left">
                                <label>* Denominación</label>
                                <input t:type="TextField" t:id="unidadOrganica_den_und_organica"
                                       t:value="unidadorganica.den_und_organica" size="60" t:validate="maxlength=255" t:disabled="${vdetalle}"/>
                            </div>
                            <div class="f-left">
                                <label>Sigla</label>
                                <input t:type="TextField" t:id="unidadOrganica_sigla"
                                       t:value="unidadorganica.sigla" size="25" t:validate="maxlength=20" t:disabled="${vdetalle}"/>
                            </div>
                            <!--<div class="f-left">
                                <label>CUE</label>
                                <input t:type="TextField" t:id="unidadOrganica_cue"
                                       t:value="unidadorganica.cue" size="25" t:validate="maxlength=15" t:disabled="${vdetalle}"/>
                            </div>--> 
                        </div>
                      </fieldset>
                      <fieldset>
                       <legend> Ubicación </legend>
                        <div class="f-wrap">
                            <div class="f-left">
                                <label>Avenida/Jirón/Calle</label>
                                <input t:type="Select" t:id="unidadOrganica_tipovia" model="tipovia"
                                       t:value="unidadorganica.tipovia" t:disabled="${vdetalle}"/>
                            </div>
                            <div class="f-left">
                                <label>Dirección</label>
                                <input t:type="TextField" t:id="unidadOrganica_localidad"
                                       t:value="unidadorganica.localidad" size="40" t:validate="maxlength=255" t:disabled="${vdetalle}"/>
                            </div>
                            <div class="f-left">
                                <label>Urb./Res./Coo./AA.HH.</label>
                                <input t:type="Select" t:id="unidadOrganica_tipozona" model="tipozona"
                                       t:value="unidadorganica.tipozona" t:disabled="${vdetalle}"/>
                            </div>
                            <div class="f-left">
                                <label>Descripción Zona</label>
                                <input t:type="TextField" t:id="unidadOrganica_desczona"
                                       t:value="unidadorganica.desczona" size="30" t:validate="maxlength=200" t:disabled="${vdetalle}"/>
                            </div>                                                     
                        </div>
                           <br/>
                            <br/>
                            <br/>
                            <br/>

                      </fieldset>
                        
                        <div class="actionunidad f-right">
                            <!--<input id="submit" type="submit" value="Guardar" class="button f-right"/>-->
                          <t:if test="${vbotones}">
                            <input t:type="Submit" t:id="save" value="Guardar" t:mixins="confirm" page="AMUnidadOrganica" class="button"/>
                            <input t:type="Submit" t:id="reset" value="Limpiar formulario" t:mixins="confirm" page="AMUnidadOrganica" class="button"/>  
                          </t:if>
                            <input t:type="Submit" t:id="cancel" value="Cancelar" t:mixins="confirm" page="AMUnidadOrganica" class="button"/>
                             <!--<t:actionlink t:id="reset" href="#">Borrar Formulario/Nuevo</t:actionlink>-->
                        </div>                     
                    </t:form>
                  
                    <!-- </t:if> -->
                </t:if>
            </t:zone>
        <!--</div>-->

        <div id="unidad_organica_ubi_geo">                    
            <t:zone t:id="ubigeoDomZone">
                <t:if test="${vformulario}">
                    <!-- <t:if test = "hayOrgano"> -->
                    <!-- INICIO - Componente para las ubicaciones geograficas -->

                    <form t:type="form" t:id="formUbiDom" t:zone="ubigeoDomZone">
                        <!--<table>
                            <tr>
                                <td colspan="3">-->
                                    <div id="tamano-ubigeo-wrap">
                                        <input t:type="Ubigeos" t:id="ubigeo_domicilio" t:ubigeo="ubigeoDomicilio"
                                               t:zone="ubigeoDomZone" t:zoneName="ubigeoDomZone" t:disabled="${vdetalle}"/>
                                    </div>
                                <!--</td>
                                </tr>
                        </table>-->
                    </form>
                    

                    <!-- FIN    - Componente para las ubicaciones geograficas -->
                    <!-- </t:if> -->
                </t:if>
            </t:zone>
         <t:if test="${vformulario}">
            <br/>
            <br/>
            <div class="f-wrap">                        
                (*) Campos Obligatorios
            </div>
         </t:if>            
        </div>
        <br/>
        <br/>
    </div> <!--  fin box -->
 
</html>

