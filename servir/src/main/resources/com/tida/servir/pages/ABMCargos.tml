<html t:type="layout" title="Servir - Cargos"
      xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd"
      xmlns:p="tapestry:parameter">

    <t:Menu/>

        <div class="organismo_titulo">
            Entidad /U. Ejecutora: ${entidadUE.denominacion}
        </div>

    <h2>Cargos</h2>

    <div id="cargosSelects">
        <form t:type="form" t:id="formNivelUOCargo" t:zone="nivelCargoZone">
            <div class="f-left">
                * Nivel Organizacional
                <input t:type="Select" t:id="unidadorganica_nivel"
                onChange="this.form.fire(Tapestry.FORM_PROCESS_SUBMIT_EVENT)" 
                t:value="nivel" model="beanNivel" t:zone="nivelCargoZone"/>
            </div>
        </form>

        <t:zone t:id="nivelCargoZone">
            <form t:type="form" t:id="formUOCargo" t:zone="abmZone">
                <div t:type="zone" t:id="selectUOZone" class="selectform t-zone f-left" >
                    <t:if test = "hayNivel">
                        * Unidad Orgánica
                        <select t:type="select" t:id="select_unidadOrganica"
                        model="beanUOrganicas" encoder="beanUOrganicas" value="uo"
                        onChange="this.form.fire(Tapestry.FORM_PROCESS_SUBMIT_EVENT)" t:zone="abmZone"/>
                    </t:if>
                </div> 
            </form>
        </t:zone>
    </div> <!-- cargosSelects -->

    <div t:type="zone" t:id="abmZone" class="abmform">
        <t:if test="uo">
            <t:form t:id="formularioaltacargo" zone="abmZone">
                <t:errors/>
                ${errorBorrar}
                <div id = "tabla_cargo">
                    <t:grid source="cargos" rowsPerPage="5" t:add="Acciones" pagerPosition="bottom"
                        row="c" exclude= "und_organica, reg_lab_con, horas_x_sem, req_hab_profesional,
                        dec_jurada_byr, presupuestado_PAP, ctd_puestos_total, nivel_unidad_organica, personasCargo">
                        <t:parameter name="empty">
                            <div class="no-info">No hay cargos generados</div>
                        </t:parameter>
                        <p:accionesCell>
                            <t:if test="PuedeEditar">
                                <t:actionlink t:id="editar" zone="abmZone" context="c">Editar</t:actionlink>
                                <!--
                                <a t:type="pagelink" t:page="ABMCargos" t:context="c.id" href="#">Editar</a>
                                -->
                                | <a t:type="eventLink" t:event="borrarDato" t:context="c"
                                t:zone="abmZone" href="#">Borrar</a>
                            </t:if>
                        </p:accionesCell>
                    </t:grid>
                </div> <!-- tabla cargos -->

                <t:if test="PuedeEditar">
                    <t:envelope t:id="envelope"/>
                    <div class="box" id="box-cargos">
                        <h3> Crear / Editar Cargo </h3>
                        <div id="cargos_izq" class="cargosAM">
                            <div class="f-wrap">

				<div class="f-left">
                                    <label>* Nivel Organizacional</label>
                                    <input t:type="Select" t:id="cargo_nivel" model="beanNivel" t:value="cargo.nivel"/>
                                </div>

				<div class="f-left">
                                    <label>* Unidad Orgánica</label>
                                    <input t:type="Select" t:id="cargo_und_organica" model="beanUOrganicas" encoder="beanUOrganicas" t:value="cargo.und_organica"/>
                                </div>

			       <div class="f-left">
                                    <label>* Código</label>
                                    <input t:type="TextField" t:id="cargo_cod_cargo"
                                    t:value="cargo.cod_cargo" size="4" t:validate="required"/>
                                </div>
                                <div class="f-left">
                                    <label>* Denominación</label>
                                    <input t:type="TextField" t:id="cargo_den_cargo"
                                    t:value="cargo.den_cargo" size="30" t:validate="required, maxlength=30"/>
                                </div>
                                <!-- <div class="f-left">
                                    <label>Estado</label>
                                    <input t:type="Select" t:id="cargo_estado" model="estado"
                                    t:value="cargo.estado"/>
                                </div>-->
                            </div> <!-- div f-wrap -->
                            <!-- <div class="f-wrap">
                                <div class="f-left">              
                                    <label>Régimen Laboral /Contractual</label>
                                    <input t:type="Select" t:id="cargo_reg_lab_con" model="regimen"
                                    t:value="cargo.reg_lab_con"/>
                                </div>
                            </div> -->
                        </div>
                        <div id="cargos_der" class="cargosAM">
                            <div class="f-wrap">
                                <div class="f-left">
                                    <label>Clasificación funcional</label>
                                    <input t:type="Select" t:id="cargo_clasificacion_funcional" model="codFunCargo"
                                    t:value="cargo.clasificacion_funcional"/>
                                </div>
                                <div class="f-left">
                                    <label>Horas semanales</label>
                                    <input t:type="TextField" t:id="cargo_horas_x_sem"
                                    t:value="cargo.horas_x_sem" size="2"/>
                                </div>                    
                            </div>
                            <div class="f-wrap">
                                <div class="f-left checkbox">
                                    <label>Requiere habilitación profesional</label>
                                    <input t:type="Checkbox" t:id="cargo_req_hab_profesional"
                                    t:value="cargo.req_hab_profesional"  />
                                </div>
                                <div class="f-left checkbox">
                                    <label>Presenta Declaración Jurada de Bienes y Rentas</label>
                                    <input t:type="Checkbox" t:id="cargo_dec_jurada_byr"
                                    t:value="cargo.dec_jurada_byr" />
                                </div>
                            </div> <!-- div f-wrap -->
                        </div> <!-- div cargo der -->

                        <div id="cargos_der" class="cargosAM">
                            <div class ="f-wrap">
                                <div class="f-left">
                                    <label>Situación en el CAP</label>
                                    <input t:type="Select" t:id="cargo_situacion_CAP" t:value="cargo.situacion_CAP"
                                    model="beanDatoSituacionCAP"/>                                    
                                </div>
                                <div class="f-left checkbox">
                                    <label>Presupuestado en PAP</label>
                                    <input t:type="Checkbox" t:id="cargo_presupuestado_PAP"
                                    t:value="cargo.presupuestado_PAP"/>
                                </div>
                                <div class="f-left checkbox">
                                    <label>Tiene personas a cargo</label>
                                    <input t:type="Checkbox" t:id="cargo_personasCargo"
                                    t:value="cargo.personasCargo"/>
                                </div>
                            </div> <!-- div f-wrap -->
                        </div> <!-- div der -->
                        <div class="actions f-right" id="bouttonambcargos">
                            <input id="submit" type="submit" value="Enviar" class="button f-right"/>
                            <t:actionlink t:id="reset" zone="abmZone" href="#">Borrar Formulario/Nuevo</t:actionlink>
                        </div>
                    </div> <!-- div box -->
                </t:if> <!-- puedeEditar -->
            </t:form>
        </t:if>
    </div> <!-- abmZone -->

    <t:zone t:id="OcupacionalesZone">
        <t:if test="uo">
            <t:if test="PuedeEditar">
                <div id = "ocupacionalescargo">
                    <form t:type="form" t:id="formOcupacional" t:zone="OcupacionalesZone">
                        <input t:type="RegimenesGruposNiveles" t:id="regimengruponivel" t:regimengruponivel="regimengruponivel"
                        t:zone="OcupacionalesZone" t:zoneName="OcupacionalesZone" disabled ="noeditable"/>
                    </form>
                    <!-- <form t:type="form" t:id="formOcupacional" t:zone="OcupacionalesZone">
                        <input t:type="Ocupacionales" t:id="ocupacional" t:ocupacional="ocupacional"
                        t:zone="OcupacionalesZone" t:zoneName="OcupacionalesZone" disabled ="noeditable"/>
                    </form> -->
                </div>
            </t:if> <!-- puedeEditar -->
        </t:if>
    </t:zone>
</html>