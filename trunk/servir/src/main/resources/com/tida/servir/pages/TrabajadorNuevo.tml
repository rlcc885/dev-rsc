<html t:type="layout" title="Sistema SERVIR"
      xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd"    
      xmlns:p="tapestry:parameter">

      <div class="organismo_titulo">
            Entidad /U. Ejecutora: ${oi.denominacion}
      </div>

    
      <div t:type="zone" t:id="mensajesZone" >
                <t:form t:id="formulariomensajes"  zone="mensajesZone"> 
                    <t:envelope t:id="envelope"/>
                    <t:errors/>
                </t:form> 
      </div>
      <t:if test="${vformulario}">
          
     <div class="box-background-title">
        <span class="box-title">Alta de Trabajador</span>
    </div>
       <div class="box">
           <fieldset>
            <legend> Datos Personales</legend> 
           <t:if test="mostrar">
            <t:zone t:id="trabajadorNuevoZone">

                <t:form t:id="formulariotrabajadornuevo" zone="trabajadorNuevoZone">
                <t:errors/>

                    <div class="f-wrap">
                        <div class="f-left">
                            <t:label for="nuevo_tipoDocumento"/> 
                            <input t:type="Select" t:id="nuevo_tipoDocumento" t:value="nuevo.documentoidentidad" onChange="this.form.fire(Tapestry.FORM_PROCESS_SUBMIT_EVENT)"
                                   model="tiposDoc" t:blankOption="ALWAYS" t:validate="required" />
                        </div>
                        <div class="f-left">
                            <t:label for="nuevo_nroDocumento"/>
                            <input t:type="TextField" t:id="nuevo_nroDocumento" t:value="nuevo.nroDocumento" t:mixins="zoneUpdater" t:clientEvent="keyup" t:event="DNIChanged"  t:zone="trabajadorNuevoZone"
                                size="8" t:validate="required, regexp"/>
                        </div>                         
                    </div>
                    <div class="f-wrap">
                        <div class="f-left">
                            <t:label for="nuevo_nombres"/>
                            <input t:type="TextField" t:id="nuevo_nombres" t:value="nuevo.nombres" size="30" t:validate="required" t:mixins="zoneUpdater" t:clientEvent="keyup" t:event="nombreChanged"  t:zone="trabajadorNuevoZone"/>
                        </div>
                        <div class="f-left">
                            <t:label for="nuevo_apellidoPaterno" />
                            <input t:type="TextField" t:id="nuevo_apellidoPaterno" t:value="nuevo.apellidoPaterno" size="30" t:validate="required" t:mixins="zoneUpdater" t:clientEvent="keyup" t:event="apePatChanged"  t:zone="trabajadorNuevoZone"/>
                        </div>
                        <div class="f-left">
                            <t:label for="nuevo_apellidoMaterno" />
                            <input t:type="TextField" t:id="nuevo_apellidoMaterno" t:value="nuevo.apellidoMaterno" size="30" t:validate="required" t:mixins="zoneUpdater" t:clientEvent="keyup" t:event="apeMatChanged"  t:zone="trabajadorNuevoZone"/>
                        </div>
                    </div>                    
                </t:form>
             </t:zone>
           </t:if>
           </fieldset>
           <fieldset>
            <legend> Asignación de Cargo</legend>
                <div class = "f-wrap">
                    <t:zone t:id="unidadOrganicaZone">
                        <t:form t:id="formulariounidadorganica" zone="nuevaUnidadOrganicaZone">
                            <div class ="f-left">
                                <t:label for="unidadorganica" />
                                <input t:type="Select" t:id="unidadorganica" t:value="unidadorganica"   
                                model="beanUOrganicas" onChange="this.form.fire(Tapestry.FORM_PROCESS_SUBMIT_EVENT)" 
                                t:zone="nuevaUnidadOrganicaZone" t:blankOption="ALWAYS" disabled="${bUOrganica}"/>

                            </div>
                    </t:form>
                    </t:zone>
                    <t:zone t:id="nuevaUnidadOrganicaZone">
                        <t:form t:id="formularionuevaunidadorganica" zone="nuevaUnidadOrganicaZone">
                            <input t:type="Submit" t:id="nuevaUO" value="|+|" class="button" /> 
                            <t:if test="bUOrganica">
                                <div class="f-left">
                                    <t:label for="unidadorganica2"/>
                                    <input t:type="TextField" t:id="unidadorganica2" t:value="nuevaUOrganica" size="60"/>
                                    <input t:type="Submit" t:id="agregarUO" value="Agregar" class="button" />
                                </div>
                            </t:if>                        
                        </t:form>
                    </t:zone>
                    
                     <t:zone t:id="cargosZone">
                        <t:form t:id="formulariocargo" zone="nuevoCargosZone">
                            <div class ="f-left">
                                <t:label for="cargo"/>
                                <input t:type="Select" t:id="cargo" t:value="cargo" 
                                    model="beanCargo" onChange="this.form.fire(Tapestry.FORM_PROCESS_SUBMIT_EVENT)"  
                                    t:zone="nuevoCargosZone" t:blankOption="ALWAYS"  disabled="${bCargo}"/>
                            </div>
                        </t:form>
                    </t:zone>
                    <t:zone t:id="nuevoCargosZone">
                        <t:form t:id="formularionuevocargo" zone="nuevoCargosZone">
                            <input t:type="Submit" t:id="nuevaCargo" value="|+|" class="button" /> 
                            <t:if test="bCargo">
                            <div class ="f-left">
                                <t:label for="cargo2"/>
                                    <input t:type="TextField" t:id="cargo2" t:value="nuevoCargo" size="60"/>
                                    <input t:type="Submit" t:id="agregarCargo" value="Agregar" class="button" />
                            </div>
                            </t:if> 
                        </t:form>
                    </t:zone>
                    
                </div>
               
                <div class = "f-wrap">
                    <t:zone t:id="tipoVinculoZone">
                        <t:form t:id="formulariotipovinculo" zone="tipoVinculoZone">
                            <div class ="f-left">
                                <t:label for="tipovinculo" />
                                <input t:type="Select" t:id="tipovinculo" t:value="tipovinculo"   
                                model="beanTipoVinculo"
                                t:validate="required" t:zone="tipoVinculoZone" t:blankOption="ALWAYS"/>

                            </div>
                            <div class="f-left">
                                    <t:label for ="puestoconfianza">Puesto Confianza: </t:label>
                                    <input t:type="Checkbox" t:id="puestoconfianza"
                                            t:value="puestoconfianza" t:zone="tipoVinculoZone" />
                              </div>
                            <!--
                                <div class="f-left">
                                    <t:label for="fecha_ingreso"/>
                                    <input t:type="DateField" t:id="fecha_ingreso"
                                        t:validate="required" t:value="fechaingreso" t:mixins="zoneUpdater" t:clientEvent="onBlur" t:event="fechaIngresoChanged"  t:zone="tipoVinculoZone" />
                                </div>
                            -->
                                <div class="f-left">	
                                    <t:label for="fecha_ingreso"/>
                                    <input t:type="TextField" t:id="fecha_ingreso" t:value="fechaingreso" t:validate="required" />
                                    <img src="layout/images/cal3.gif" border="0" width="18" height="16" onclick="popUpCalendar(this, formulariotipovinculo.fecha_ingreso, 'dd/mm/yyyy');" style="cursor:hand;"></img>
                                </div>
                            <div class="f-right">
                                <input t:type="Submit" t:id="guardar" value="Guardar" class="button" t:mixins="confirm" t:message="Desea ejecutar esta acción?"/>
                            </div>
                    </t:form>
                    </t:zone>
                </div> 
           </fieldset>
           <br/>
            <div class="f-wrap">                        
                (*) Campos Obligatorios
            </div>
       </div>
        
        <div class="box">
            <div id = "tabla_oi">
                <t:zone t:id="listaentidadZone">
                     <t:if test="bTrabajadorRegistrado">
                            <t:grid source="listadoEntidades" rowsPerPage="10" pagerPosition="bottom"
                                    row="listaentidad"  include="id,nombretrabajador,entidad,unidadorganica,cargo,estadocargo" inPlace="true" >
                                <t:parameter name="empty">
                                    <div class="no-info">No hay entidades generadas</div>
                                </t:parameter>
                            </t:grid>
                    </t:if>
                </t:zone>
            </div>  
        </div>
    
        <div class="f-wrap">  
            <div t:type="zone" t:id="botonesZone" >
                    <t:form t:id="formulariobotones"  t:zone="listaentidadZone">

                    <div class="f-right">
                        <input t:type="Submit" t:id="cancel" value="Cancelar" class="button" t:mixins="confirm"  t:message="Desea ejecutar esta acción?"/> 
                    </div>
                    <div class="f-right">
                        <input t:type="Submit" t:id="reset" value="Limpiar Formulario" class="button" t:mixins="confirm" t:message="Desea ejecutar esta acción?"/>  
                    </div>
                   
                    </t:form>

            </div>
        </div>  
      </t:if>
      <t:if test="${vformulario}" negate="true" >
      <div class="no-info">No tiene permisos suficientes</div>
      </t:if>
</html>