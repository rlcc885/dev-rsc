<html t:type="layout" title="Sistema SERVIR"
      t:sidebarTitle="Current Time"
      xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd"
      xmlns:p="tapestry:parameter">

    <div class="organismo_titulo">
        Entidad /U. Ejecutora: ${entidadUE.denominacion}
    </div>
    <div class = "mensajes">
        ${mensajes}
    </div>
    <div t:type="zone" t:id="categoriasZone">
        <fieldset>
            Seleccione la Categoría:&nbsp;
            <t:if test="trabajadorLink" ><a t:type="actionlink" t:id="mostrarTrabajador" zone="tipoReporteZone">Trabajador</a> &nbsp;-&nbsp;</t:if>
            <t:if test="entidadLink" ><a t:type="actionlink" t:id="mostrarEntidad" zone="tipoReporteZone">Entidad/Unidad Organica</a> &nbsp;-&nbsp;</t:if>
            <t:if test="usuarioLink" ><a t:type="actionlink" t:id="mostrarUsuario" zone="tipoReporteZone">Usuario</a> &nbsp;-&nbsp;</t:if>
            <t:if test="gobiernoLink" ><a t:type="actionlink" t:id="mostrarGobierno" zone="tipoReporteZone">Nivel de Gobierno/Sector/Organización del Estado</a></t:if>
        </fieldset>
    </div>
    <div class="organismo_titulo" t:type="zone" t:id="categoriaZone" update="show">
        Categoría: ${categoria}
    </div>
    
    <div t:type="zone" t:id="tipoReporteZone" update="show">
        <t:form t:id="formularioReporte" zone="tipoReporteZone" target="_blank">
            <fieldset>
                Reporte: &nbsp;
                <input t:type="Select" t:id="tipoReporteSelect" t:value="tipoReporteSelect" model="TipoReportes" t:zone="tipoReporteZone" t:blankOption="ALWAYS"/>
                &nbsp; Formato del Reporte: &nbsp;
                <t:radiogroup t:id="type">
                    Excel <t:radio t:id="excel" value="excel"/>
                    PDF <t:radio t:id="pdf" value="pdf"/>
                </t:radiogroup>
            </fieldset>
            
            <fieldset>
                <div>
                    <t:if test="mostrarFiltrosTrabajador" >
                        <legend> Categoría: Trabajador </legend>
                        <div class="f-wrap">                             
                            <t:zone t:id="trabajadorZone" t:update="show">
                                <div class="f-left">
                                    Trabajador: 
                                    <input t:type="TextField" t:id="titular" t:style="width:600px;" t:value="titular" t:readonly="readonly" /> 
                                    <input t:type="submit" t:id="buscarTitular" value="..." class="button f-right" onClick="javascript: mostrar();" />             
                                </div>
                            </t:zone>
                        </div>
                    </t:if>
                </div>
                
                <input t:type="Submit" t:id="generarReporte" value="Generar Reporte" class="button f-right" disabled="generarDisabled"/>
            </fieldset>
        </t:form>
    </div>

    <script type="text/javascript">
        
        function mostrar() {
            var modal= document.getElementById('modal');
            var shade= document.getElementById('shade');
            modal.style.display=shade.style.display= 'block';
        }
        function ocultar() {
            var modal= document.getElementById('modal');
            var shade= document.getElementById('shade');
            modal.style.display=shade.style.display= 'none';
        }
    </script>
    
    <div id="shade"></div>
    <div id="modal">
        <t:zone t:id="busZone" t:update="show" >
            <h1>Selección de Trabajador</h1>
            <div class="pane">
                <form t:type="form" t:id="formFindTrabajador" t:zone ="busZone">
                    <div class="f-wrap">
                        <div class="f-left">
                            Nombre completo: 
                            <input t:type="TextField" t:id="trabajador_ape" t:value="nombreTrabajador" style="width: 300px;"/> 
                        </div>
                        <div class="actions f-right">
                            <input id="buscarsubmit" type="submit" value="Buscar" class="button" />
                            <input t:type="Submit" t:id="cancelFormFindTrabajador" value="Cancelar" class="button" onClick="javascript: ocultar();"/>
                        </div>
                    </div>
                </form>
            </div>
        </t:zone>
        <t:zone t:id="trabaZone" t:update="show">
            <t:if test="mostrar">
                <t:grid source="trabajadores" rowsPerPage="10" t:add="Acciones" pagerPosition="bottom" row="titulart" include="nombretrabajador" inPlace="true">
                    <t:parameter name="empty">
                        <div class="no-info">No hay Trabajadores encontrados.</div>
                    </t:parameter>
                    <p:accionesCell> 
                        <t:actionlink t:id="seleccionaTitular" zone="trabaZone" context="titulart" onClick="javascript: ocultar();">Seleccionar</t:actionlink>                                                      
                    </p:accionesCell>
                </t:grid>
            </t:if>
        </t:zone>
    </div>
</html>