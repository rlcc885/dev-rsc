<html t:type="layout" title="Servir Unidades Orgánicas"
      xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd"
      xmlns:p="tapestry:parameter">


    <t:Menu/>
        <div class="organismo_titulo">
            Entidad /U. Ejecutora: ${entidadUE.denominacion}
        </div>

    <h2> Unidades Orgánicas </h2>

    <div id="mainfiltros" class="pane">
    <div class="box">
                <h3>
                    Búsqueda Básica
                </h3>
               
                                    <!-- t:validate="required,minlength=1" -->
                <div id="filtrosnombres" class="f-wrap">
                    <!--1.1-->
                    <t:zone t:id="bnivelZone">
                            <form t:type="form" t:id="formNivelUOUnidad" t:zone="bnivelZone">
                                <div class="f-wrap">
                                    <div class="f-left">
                                        Nivel Organizacional
                                        <input t:type="Select" t:id="uo_nivel"
                                        onChange="this.form.fire(Tapestry.FORM_PROCESS_SUBMIT_EVENT)"
                                        t:value="bnivelUO" model="nivel"/>
                                    </div>                                    
                                    <t:if test="siuno">
                                        <div class="f-left">
                                            Unidad Orgánica Antecesora
                                            <input t:type="Select" t:id="bunidadOrganica_uoa"
                                            onChange="this.form.fire()" 
                                            t:value="buoAntecesora" model="bbeansUO"                                   t:blankOption="ALWAYS"/>
                                        </div>                                 
                                    </t:if>
                                </div>
                            </form>
                        </t:zone>
                    
                    
                    <div t:type="zone" t:id="filtrosZone" > 
                             <form t:type="form" t:id="formulariofiltrounidad" zone="listaUOZone">   
                                Categoría
                                <input t:type="Select" t:id="bcategoria" t:value="valcategoria" model="tipoActividad" />
                                Denominación
                                <input t:type="TextField" t:id="bdenouni" t:value="bdenouni" size="30"/>                                
                                Sigla
                                <input t:type="TextField" t:id="bsigla" t:value="bsigla" size="30"/>
                                <div class="actions f-right">
                                    <input id="buscarsubmit" type="submit" value="Buscar" class="button f-right" />
                                    <input t:type="Submit" t:id="limpia" value="Limpiar formulario" t:mixins="confirm" page="AMUnidadOrganica" class="button f-right"/>  
                                </div> 
                            </form>   
                    </div>
                </div>
                                    
    </div>
    </div>
     
    <div t:type="zone" t:id="listaUOZone" class="selectform" >
        <!-- <t:if test = "hayOrgano"> -->
        <t:if test="mostrar">
                <t:if test="errorBorrar">
                    <div class="error" id = "errorBorrar">
                        ${errorBorrar}
                    </div>
                </t:if>
            <t:grid source="unidadesorganicas" rowsPerPage="15" t:add="Acciones" pagerPosition="bottom"
                 row="uo" >
                <t:parameter name="empty">
                    <div class="no-info">No hay unidades orgánicas generadas</div>
                </t:parameter>
                <p:accionesCell>
                    <t:if test="PuedeEditar">
                        <a t:type="pagelink" t:page="AMUnidadOrganica" t:context="uo.id" href="#">Editar</a>
                        <t:if test="esBorrable">
                            | <a t:type="eventLink" t:event="borrarDato" t:context="uo"
                                t:zone="listaUOZone" href="#"> Borrar </a>
                        </t:if>
                    </t:if>
                </p:accionesCell>
            </t:grid>
        <!-- </t:if> -->
        </t:if>
    </div> <!-- listaUOZone -->

    <!-- <div id="box_uo" class="box"> -->
                <t:envelope t:id="envelope"/>
                <div id="box_uo" class="box">
                    <h3>Crear/Editar Unidad OrgÃ¡nica</h3>

                    <div id="form_unidad_organica" class="abmform">
                        <t:zone t:id="nivelZone">
                            <form t:type="form" t:id="formNivelUO" t:zone="nivelZone">
                                <div class="f-wrap">
                                    <div class="f-left">
                                        * Nivel Organizacional
                                        <input t:type="Select" t:id="unidadorganica_nivel"
                                        onChange="this.form.fire(Tapestry.FORM_PROCESS_SUBMIT_EVENT)"
                                        t:value="nivelUO" model="nivel" t:validate="required"/>
                                    </div>
                                    <t:if test="nivelUno" negate= "true">
                                        <!-- <div class="f-left">
                                            * Entidad /U.Ejecutora
                                            <input t:type="Select" t:id="unidadOrganica_entidadUE"
                                            t:value="entidadUE" model="beansEUE" t:validate="required"
                                            t:zone="nivelZone"/>
                                        </div> -->
                                        <div class="f-left">
                                            * Unidad OrgÃ¡nica Antecesora
                                            <input t:type="Select" t:id="unidadOrganica_uoa"
                                            onChange="this.form.fire(Tapestry.FORM_PROCESS_SUBMIT_EVENT)" 
                                            t:value="uoAntecesora" model="beansUO" t:validate="required"
                                            t:zone="ubigeoDomZone" t:blankOption="ALWAYS"/>
                                        </div>
                                    </t:if>
                                </div>
                            </form>
                        </t:zone>
                        <t:zone t:id="unidadesOrganicasZone">
                         <t:if test="PuedeEditar">

                        <t:form t:id="formularioaltaunidadorganica" t:zone="unidadesOrganicasZone">
                            <t:errors/>

                            <div class="f-wrap">
                                <div class="f-left">
                                    * Código
                                    <input t:type="TextField" t:id="unidadorganica_cod_und_organica"
                                    t:value="unidadorganica.cod_und_organica" size="4" t:validate="required"/>
                                </div>
                                <div class="f-left">
                                    * Denominación
                                    <input t:type="TextField" t:id="unidadOrganica_den_und_organica"
                                    t:value="unidadorganica.den_und_organica" size="60" t:validate="required"/>
                                </div>
                                <div class="f-left">
                                    Dirección
                                    <input t:type="TextField" t:id="unidadOrganica_localidad"
                                    t:value="unidadorganica.localidad" size="60"/>
                                </div>
                            </div>
                            <div class="f-wrap">
                                <div class="f-left">
                                    * Sigla
                                    <input t:type="TextField" t:id="unidadOrganica_sigla"
                                    t:value="unidadorganica.sigla" size="60"/>
                                </div>
                                <div class="f-left">
                                    CUE
                                    <input t:type="TextField" t:id="unidadOrganica_cue"
                                    t:value="unidadorganica.cue" size="8"/>
                                </div>
                                <div class="f-left">
                                    Categoría
                                    <!--<input t:type="Select" t:id="unidadorganica_tipo_actividad" model="tipoActividad"
                                    t:value="unidadorganica.tipoActividad"/>-->
                                </div>
                            </div>
                            <div id="bouttons_uo" class="actions f-right clear">
                                <input id="submit" type="submit" value="Grabar" class="button f-right"/>
                                <t:actionlink t:id="reset" href="#">Borrar Formulario/Nuevo</t:actionlink>
                            </div>
                        </t:form>
                 
                <!-- </t:if> -->
            </t:if>
        </t:zone>
       </div>
                     
        <t:zone t:id="ubigeoDomZone">
            <t:if test="PuedeEditar">
                <!-- <t:if test = "hayOrgano"> -->
                    <!-- INICIO - Componente para las ubicaciones geograficas -->
                    <div id="unidad_organica_ubi_geo">
                        <form t:type="form" t:id="formUbiDom" t:zone="ubigeoDomZone">
                            <table>
                                <tr>
                                    <td colspan="2">
                                        <div id="tamano-ubigeo-wrap">
                                            <input t:type="Ubigeos" t:id="ubigeo_domicilio" t:ubigeo="ubigeoDomicilio"
                                                    t:zone="ubigeoDomZone" t:zoneName="ubigeoDomZone"/>
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </form>
                    </div>
                    <!-- FIN    - Componente para las ubicaciones geograficas -->
                <!-- </t:if> -->
            </t:if>
        </t:zone>
    </div> <!--  fin box -->
</html>
