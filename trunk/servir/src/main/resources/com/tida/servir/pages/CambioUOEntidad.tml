<html t:type="layout" title="Sistema SERVIR"
      t:sidebarTitle="Current Time"
      xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd"
      xmlns:p="tapestry:parameter">
        <!-- Most of the page content, including <head>, <body>, etc. tags, comes from Layout.tml -->

        <t:Menu/>
        
        
        <div class="organismo_titulo">
            Entidad /U. Ejecutora: ${entidadUE.denominacion}
        </div>
       
       
        <div id= "datosOrigen" class="box">
            <h3> Opciones / Fuente de Origen</h3>
           <div class="f-wrap">
                    <t:zone t:id="UOOrigenZone">
                        <form t:type="form" t:id="formUOOrigen" t:zone="UOOrigenZone">
                          <div class="f-wrap">
                            <div class="f-left">
                                Opciones
                                <input t:type="Select" t:id="cambio_opciones"
                                t:value="opcion" model="bopciones"/>
                            </div>                            
                            <div class="f-left">
                            * Unidad Orgánica
                            <select t:type="select" t:id="select_unidadOrganicaOrigen"
                            model="beanUOrganicasOrigen" encoder="beanUOrganicasOrigen" value="uoOrigen"
                            t:validate="required"/>
                            </div>
                            <div class="f-left">    
                                Entidad Origen
                                <input t:type="TextField" t:id="entidad_den"
                                    t:value="entidad_origen" t:readonly="readonly" style="width: 400px;"/>                            
                            </div>
                         </div>
                         <div class="actions f-right">  
                             <input id="buscarsubmit" type="submit" value="Buscar" class="button" onClick="javascript: mostrar();" />
                         </div>              
                        </form>
                    </t:zone>
              
            </div>
        </div>
        
        
        
        
          
<!--
        <div id="mainfiltros" class="pane">
                              
                    <t:zone t:id="UOOrigenZone">
                        <form t:type="form" t:id="formUOOrigen" t:zone="UOChangeZone">
                           
                                <div t:type="zone" t:id="selectUOZone" class="selectform t-zone f-left" >
                                    * Unidad Orgánica
                                    <select t:type="select" t:id="select_unidadOrganicaOrigen"
                                    model="beanUOrganicasOrigen" encoder="beanUOrganicasOrigen" value="uoOrigen"
                                    t:validate="required"/>
                                </div>                                
                        </form>
                    </t:zone>
        </div> -->

        <div id= "datosDestino" class="box">
            <h3> Seleccione destino</h3>
            <div class="f-wrap datosDestinos">
                <t:EntidadSelect  t:id="entidades" t:entidad="entidadDestino"
                    t:zone = "NivelDestinoZone" t:zoneName = "NivelDestinoZone"
                    t:vistaCorta = "true"/>
            </div>
            <div class="f-wrap">
                    <div class="f-left">
                        <t:zone t:id="NivelDestinoZone">
                            <t:if test= "hayentidadDestino">
                                <form t:type="form" t:id="formNivelUODestino" t:zone="UODestinoZone">
                                        * Nivel Organizacional
                                        <input t:type="Select" t:id="unidadorganica_nivel_destino"
                                        onChange="this.form.fire(Tapestry.FORM_PROCESS_SUBMIT_EVENT)"
                                        t:value="nivelDestino" model="beanNivelDestino" t:zone="UODestinoZone"/>
                                </form>
                            </t:if>
                        </t:zone>
                    </div>
                    <div class="f-left">
                        <t:zone t:id="UODestinoZone">
                            <t:if test= "hayentidadDestino">

                                <form t:type="form" t:id="formUODestino" t:zone ="UOChangeZone">
                                        <t:if test = "hayNivelDestino">
                                            * Unidad Orgánica Padre destino
                                            <select t:type="select" t:id="select_unidadOrganicaDestino"
                                            model="beanUOrganicasDestino" encoder="beanUOrganicasDestino" value="uoDestino"
                                            onChange="this.form.fire(Tapestry.FORM_PROCESS_SUBMIT_EVENT)"/>
                                        </t:if>
                                </form>
                             </t:if>
                        </t:zone>
                    </div>
                    <div class="f-left">
                        <t:zone t:id="UOChangeZone">
                            <t:if test = "ActivoSubmit">
                                <t:envelope t:id="envelope"/>
                                <form t:type="form" t:id="formUOChange" t:zone ="UOChangeZone">
                                    <input id="submit" type="submit" value="Cambiar UO a esta Entidad" class="button"/>
                                </form>
                                <form t:type="form" t:id="formUOFusionar" t:zone ="UOChangeZone">
                                    <t:errors/>
                                    <input id="submit" type="submit" value="Fusionar UO a esta Entidad" class="button"/>
                                </form>
                             </t:if>
                        </t:zone>
                    </div>
            </div> <!-- f-wrap -->
        </div> <!-- Datos Destino -->
        <a href="javascript:popup('buscarentidad',900,500)">abrir</a>
        
<!--        
<script type="text/javascript">
function popup(url,ancho,alto) {
var posicion_x; 
var posicion_y; 
posicion_x=(screen.width/2)-(ancho/2); 
posicion_y=(screen.height/2)-(alto/2); 
window.open(url, "", "width="+ancho+",height="+alto+",menubar=0,toolbar=0,directories=0,scrollbars=no,resizable=no,left="+posicion_x+",top="+posicion_y+"");
}
function datos(val1,val2){
    document.getElementById('entidad_den').value = val1;
    document.getElementById('entidad_id').value = val2;
}

</script>-->
     <!--   
        <div id="fade" class="overlay" onclick = "document.getElementById('light').style.display='none';document.getElementById('fade').style.display='none'"></div>
        <div id="light" class="modal">
    	<p>Aqui; esta; el contenido que quieras mostrar. Para <a href = "javascript:void(0)" onclick = "document.getElementById('light').style.display='none';document.getElementById('fade').style.display='none'">cerrar</a> basta un simple JS. El estilo lo puede definir dentro de <strong>.contenido</strong></p>
    </div>
          <p>Con un <a href = "javascript:void(0)" onclick = "document.getElementById('light').style.display='block';document.getElementById('fade').style.display='block'">simple click</a> podra desplegar la ventana modal.</p>
-->
<!--    
<style type="text/css">
	
	/* base semi-transparente */
    .overlay{
        display: none;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #000;
        z-index:1001;
		opacity:.75;
        -moz-opacity: 0.75;
        filter: alpha(opacity=75);
    }
	
    /* estilo para lo q este dentro de la ventana modal */
    .modal {
        display: none;
        position: absolute;
        top: 25%;
        left: 25%;
        width: 50%;
        height: 50%;
        padding: 16px;
        background: #fff;
		color: #333;
        z-index:1002;
        overflow: auto;
    }
    </style>        
-->
<style type="text/css">
            body { margin: 0; }
            #shade, #modal { display: none; }
            #shade { position: fixed; z-index: 100; top: 0; left: 0; width: 100%; height: 100%; }
            #modal { position: absolute; z-index:1002; top: 20%; left: 20%; width: 50%; height: 55%; padding: 16px; background: #fff; overflow: auto; color: #333;}
            #shade { background: silver; opacity: 0.8; filter: alpha(opacity=80); }
        </style>

         <div id="shade"></div>
        <div id="modal">           
            <h1>Selección de entidad</h1>
            <div class="pane">
                <form t:type="form" t:id="formulariobusqueda" zone="organismosZone">
                        <div class="f-wrap">
                            <div class="f-left">
                            Denominación
                            <input t:type="TextField" t:id="entida_deno" t:value="bdenoentidad" style="width: 300px;"/> 
                            </div>                   
                        </div>
                        <div class="actions f-right">
                            <input id="buscarsubmit" type="submit" value="Buscar" class="button" />                    
                        </div>  
                </form>     
            </div>
            <div class="f-wrap">
            </div>
            <div t:type="zone" t:id="organismosZone">
                <t:if test="mostrar">                                        
                         <t:grid source="entidades" rowsPerPage="6" t:add="Acciones" pagerPosition="bottom"
                        row="ex" include="denominacion" inPlace="true" t:zone="organismosZone">
                        <t:parameter name="empty">
                            <div class="no-info">No hay entidades generadas</div>
                        </t:parameter>
                        <p:accionesCell>                            
                                <t:actionlink t:id="editar" zone="UOOrigenZone" context="ex" onClick="javascript: ocultar();">Seleccionar</t:actionlink>                                                      
                        </p:accionesCell>
                    </t:grid>  

                </t:if>
             </div> <!-- abmZone --> 
            
        </div>
         
<script type="text/javascript">
            var modal= document.getElementById('modal');
            var shade= document.getElementById('shade');
            function mostrar() {
                modal.style.display=shade.style.display= 'block';
            };
            function ocultar() {
                modal.style.display=shade.style.display= 'none';
            };

            // This code is a workaround for IE6's lack of support for the
            // position: fixed style.
            //
            if (!('maxHeight' in document.body.style)) {
                function modalsize() {
                    var top= document.documentElement.scrollTop;
                    var winsize= document.documentElement.offsetHeight;
                    var docsize= document.documentElement.scrollHeight;
                    shade.style.height= Math.max(winsize, docsize)+'px';
                    modal.style.top= top+Math.floor(winsize/3)+'px';
                };
                modal.style.position=shade.style.position= 'absolute';
                window.onscroll=window.onresize= modalsize;
                modalsize();
            }
        </script>
       

</html>
